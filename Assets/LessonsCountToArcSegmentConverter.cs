using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Globalization;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Data;
using TempusVelit.Database;
using TempusVelit.Pages;

namespace TempusVelit.Assets
{
    public class LessonsCountToArcSegmentConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value is List<Lesson> lessons)
            {
                var userLessonsCount = MainPage.User.UserLessons.Count(ul => ul.IsCompleted == true);
                int result = userLessonsCount * 100 / lessons.Count;

                var paths = new[]
                {
                    "",
                    "M61.6538 0.824855C82.9838 0.999034 103.711 7.92138 120.865 20.5998L60.829 101.829L61.6538 0.824855Z",
                    "M357.654 0.824855C378.984 0.999034 399.711 7.92138 416.865 20.5998C434.019 33.2781 446.719 51.0616 453.145 71.4015L356.829 101.829L357.654 0.824855Z",
                    "M653.654 0.824855C669.593 0.955016 685.276 4.85574 699.419 12.2081C713.562 19.5605 725.764 30.1557 735.028 43.1276C744.292 56.0994 750.354 71.0796 752.719 86.8432C755.084 102.607 753.684 118.706 748.635 133.826L652.829 101.829L653.654 0.824855Z",
                    "M963.654 0.824855C984.984 0.999034 1005.71 7.92138 1022.87 20.5998C1040.02 33.2781 1052.72 51.0616 1059.14 71.4015C1065.57 91.7414 1065.39 113.593 1058.63 133.826C1051.88 154.058 1038.89 171.632 1021.53 184.028L962.829 101.829L963.654 0.824855Z",
                    "M1259.65 0.824855C1272.92 0.933169 1286.03 3.65297 1298.24 8.82898C1310.46 14.005 1321.53 21.5358 1330.83 30.9915C1340.14 40.4472 1347.48 51.6426 1352.46 63.9385C1357.44 76.2343 1359.94 89.3898 1359.83 102.654C1359.72 115.918 1357.01 129.031 1351.83 141.244C1346.65 153.457 1339.12 164.531 1329.67 173.833C1320.21 183.136 1309.02 190.485 1296.72 195.46C1284.42 200.436 1271.27 202.942 1258 202.833L1258.83 101.829L1259.65 0.824855Z",
                    "M61.6538 410.825C77.5933 410.955 93.2758 414.856 107.419 422.208C121.562 429.56 133.764 440.156 143.028 453.128C152.292 466.099 158.354 481.08 160.719 496.843C163.084 512.607 161.684 528.706 156.635 543.826C151.586 558.945 143.03 572.654 131.667 583.833C120.304 595.012 106.456 603.343 91.2566 608.145C76.057 612.947 59.9368 614.083 44.2138 611.461C28.4909 608.839 13.6118 602.533 0.792951 593.058L60.829 511.829L61.6538 410.825Z",
                    "M357.654 410.825C376.281 410.977 394.504 416.277 410.307 426.14C426.11 436.002 438.878 450.043 447.199 466.709C455.52 483.375 459.07 502.018 457.457 520.576C455.844 539.134 449.13 556.885 438.058 571.865C426.986 586.846 411.987 598.473 394.72 605.46C377.452 612.448 358.588 614.525 340.214 611.461C321.84 608.397 304.67 600.311 290.605 588.098C276.539 575.884 266.125 560.019 260.513 542.257L356.829 511.829L357.654 410.825Z",
                    "M653.654 410.825C674.984 410.999 695.711 417.921 712.865 430.6C730.019 443.278 742.719 461.062 749.145 481.401C755.57 501.741 755.392 523.593 748.635 543.826C741.878 564.058 728.889 581.632 711.531 594.028C694.172 606.425 673.334 613.008 652.004 612.833C630.674 612.659 609.947 605.737 592.793 593.058C575.639 580.38 562.939 562.597 556.513 542.257C550.088 521.917 550.266 500.065 557.023 479.833L652.829 511.829L653.654 410.825Z",
                    "M963.654 410.825C987.703 411.021 1010.89 419.792 1029.05 435.561C1047.21 451.329 1059.15 473.059 1062.72 496.843C1066.29 520.627 1061.25 544.904 1048.52 565.307C1035.79 585.71 1016.19 600.9 993.257 608.145C970.324 615.39 945.558 614.214 923.414 604.829C901.271 595.444 883.202 578.467 872.459 556.949C861.716 535.432 859.003 510.787 864.808 487.448C870.613 464.109 884.556 443.607 904.127 429.63L962.829 511.829L963.654 410.825Z",
                    "M102.654 0.824728C158.437 1.28025 203.289 46.8707 202.833 102.654C202.378 158.437 156.787 203.289 101.004 202.833C45.2211 202.378 0.369208 156.787 0.824728 101.004C1.28025 45.2211 46.8707 0.369208 102.654 0.824728Z"
                };

                int index = result / 10;
                return index >= 0 && index < paths.Length ? paths[index] : "";
            }
            return null;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
}
